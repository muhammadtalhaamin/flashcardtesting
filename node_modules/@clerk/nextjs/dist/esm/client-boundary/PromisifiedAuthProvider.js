"use client";
import { useAuth } from "@clerk/clerk-react";
import { useDerivedAuth } from "@clerk/clerk-react/internal";
import { useRouter } from "next/compat/router";
import { PHASE_PRODUCTION_BUILD } from "next/constants";
import React from "react";
const PromisifiedAuthContext = React.createContext(null);
function PromisifiedAuthProvider({
  authPromise,
  children
}) {
  return /* @__PURE__ */ React.createElement(PromisifiedAuthContext.Provider, { value: authPromise }, children);
}
function usePromisifiedAuth() {
  const isPagesRouter = useRouter();
  const valueFromContext = React.useContext(PromisifiedAuthContext);
  let resolvedData = valueFromContext;
  if (valueFromContext && "then" in valueFromContext) {
    resolvedData = React.use(valueFromContext);
  }
  if (typeof window === "undefined") {
    if (isPagesRouter) {
      return useAuth();
    }
    if (!resolvedData && process.env.NEXT_PHASE !== PHASE_PRODUCTION_BUILD) {
      throw new Error(
        "Clerk: useAuth() called in static mode, wrap this component in <ClerkProvider dynamic> to make auth data available during server-side rendering."
      );
    }
    return useDerivedAuth(resolvedData);
  } else {
    return useAuth(resolvedData);
  }
}
export {
  PromisifiedAuthProvider,
  usePromisifiedAuth
};
//# sourceMappingURL=PromisifiedAuthProvider.js.map